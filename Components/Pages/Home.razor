@inject DatabaseService DatabaseService
@page "/"

<PageTitle>LoadHitch</PageTitle>


<main class="min-h-screen bg-slate-50 text-slate-900">
	<div class="mx-auto max-w-5xl px-6 py-10">
		<section class="rounded-3xl bg-white p-8 shadow-md">
			<p class="text-xs font-semibold uppercase tracking-[0.2em] text-hitchOrange">Logistics platform</p>
			<h1 class="mt-4 text-4xl font-black text-hitchBlue">Load &amp; truck matching</h1>
			<p class="mt-4 text-lg text-slate-600">
				LoadHitch helps shippers post loads, drivers share availability, and both sides stay coordinated through a lightweight booking flow.
			</p>
			<div class="mt-6 flex flex-wrap gap-3">
				<span class="rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-700">Loads dashboard</span>
				<span class="rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-700">Trucks dashboard</span>
				<span class="rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-700">Role-based access</span>
			</div>
		</section>

		<section class="mt-10 grid gap-6 md:grid-cols-2">
			<article class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
				<h2 class="text-xl font-semibold text-hitchBlue">Shippers</h2>
				<p class="mt-2 text-sm text-slate-600">Post loads in seconds, watch drivers claim jobs, and confirm bookings without endless emails.</p>
			</article>
			<article class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
				<h2 class="text-xl font-semibold text-hitchBlue">Drivers</h2>
				<p class="mt-2 text-sm text-slate-600">Share preferred lanes, keep trucks full, and respond to new opportunities on any device.</p>
			</article>
		</section>

		<section class="mt-10 rounded-2xl border border-dashed border-slate-300 bg-white p-6 shadow-sm">
			<h2 class="text-xl font-semibold text-hitchBlue">Database connectivity</h2>
			<p class="@($"mt-2 text-sm {_statusColor}")">@_statusMessage</p>
			<p class="mt-1 text-xs text-slate-500">Update <code>.env</code> with the correct password to enable the live Azure PostgreSQL connection.</p>
		</section>
	</div>
</main>

@code {
	private string _statusMessage = "Checking database connection...";
	private string _statusColor = "text-slate-500";

	protected override async Task OnInitializedAsync()
	{
		var result = await DatabaseService.TestConnectionAsync();
		_statusMessage = result.Message;
		_statusColor = result.IsSuccessful ? "text-green-600" : "text-red-600";
	}
}
